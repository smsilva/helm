---
apiVersion: external-secrets.io/v1alpha1
kind: SecretStore
metadata:
  name: azurerm
spec:
  provider:
    azurekv:
      tenantId: {{ .Values.azurekv.tenantId | quote }}
      vaultUrl: "https://{{ .Values.azurekv.keyVaultName }}.vault.azure.net"
     
      authSecretRef:
        clientId:
          name: {{ .Values.azurekv.secret }}
          key:  ARM_CLIENT_ID

        clientSecret:
          name: {{ .Values.azurekv.secret }}
          key:  ARM_CLIENT_SECRET
---
apiVersion: external-secrets.io/v1alpha1
kind: ClusterSecretStore
metadata:
  name: azurerm
spec:
  provider:
    azurekv:
      authType: ServicePrincipal
      
      tenantId: {{ .Values.azurekv.tenantId | quote }}
      vaultUrl: "https://{{ .Values.azurekv.keyVaultName }}.vault.azure.net"
      
      authSecretRef:
        clientId:
          key: ARM_CLIENT_ID
          name: default/azurerm
        
        clientSecret:
          key: ARM_CLIENT_SECRET
          name: default/azurerm
